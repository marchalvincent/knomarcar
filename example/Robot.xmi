<?xml version="1.0" encoding="ASCII"?>
<metamodel:Robot
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:metamodel="http://metamodel/1.0"
    xsi:schemaLocation="http://metamodel/1.0 ../model/metaModel.ecore"
    name="e-puck">
  <behaviours
      name="escape"
      priority="1">
    <stateMachine
        name="stateMachineScape">
      <states
          name="init"
          isInitial="true"
          uid="rootEscape">
        <transitions
            dstId="//@behaviours.0/@stateMachine/@states.1"
            nameIn="initToLeft">
          <cond
              xsi:type="metamodel:And">
            <operandRight
                xsi:type="metamodel:And">
              <operandRight
                  xsi:type="metamodel:More">
                <operandLeft
                    xsi:type="metamodel:Sub">
                  <operandLeft
                      xsi:type="metamodel:Positive"
                      valeur="//@sensors.1/@value"/>
                  <OperandRight
                      xsi:type="metamodel:Positive"
                      valeur="//@sensors.0/@value"/>
                </operandLeft>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.2"/>
              </operandRight>
              <operandLeft
                  xsi:type="metamodel:Less">
                <operandLeft
                    xsi:type="metamodel:Positive"
                    valeur="//@sensors.0/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandLeft>
            </operandRight>
            <operandLeft
                xsi:type="metamodel:MoreOrEqual">
              <operandLeft
                  xsi:type="metamodel:Positive"
                  valeur="//@sensors.1/@value"/>
              <OperandRight
                  xsi:type="metamodel:Positive"
                  valeur="//@behaviours.0/@stateMachine/@constants.0"/>
            </operandLeft>
          </cond>
        </transitions>
        <transitions
            dstId="//@behaviours.0/@stateMachine/@states.4"
            nameIn="initToStraight">
          <cond
              xsi:type="metamodel:Or">
            <operandRight
                xsi:type="metamodel:And">
              <operandRight
                  xsi:type="metamodel:More">
                <operandLeft
                    xsi:type="metamodel:Negative"
                    valeur="//@sensors.0/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandRight>
              <operandLeft
                  xsi:type="metamodel:More">
                <operandLeft
                    xsi:type="metamodel:Positive"
                    valeur="//@sensors.1/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandLeft>
            </operandRight>
            <operandLeft
                xsi:type="metamodel:And">
              <operandRight
                  xsi:type="metamodel:Less">
                <operandLeft
                    xsi:type="metamodel:Positive"
                    valeur="//@sensors.2/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandRight>
              <operandLeft
                  xsi:type="metamodel:Less">
                <operandLeft
                    xsi:type="metamodel:Positive"
                    valeur="//@sensors.3/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandLeft>
            </operandLeft>
          </cond>
        </transitions>
        <transitions
            dstId="//@behaviours.0/@stateMachine/@states.2"
            nameIn="initToRight">
          <cond
              xsi:type="metamodel:And">
            <operandRight
                xsi:type="metamodel:And">
              <operandRight
                  xsi:type="metamodel:More">
                <operandLeft
                    xsi:type="metamodel:Sub">
                  <operandLeft
                      xsi:type="metamodel:Positive"
                      valeur="//@sensors.0/@value"/>
                  <OperandRight
                      xsi:type="metamodel:Positive"
                      valeur="//@sensors.1/@value"/>
                </operandLeft>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.2"/>
              </operandRight>
              <operandLeft
                  xsi:type="metamodel:Less">
                <operandLeft
                    xsi:type="metamodel:Positive"
                    valeur="//@sensors.1/@value"/>
                <OperandRight
                    xsi:type="metamodel:Positive"
                    valeur="//@behaviours.0/@stateMachine/@constants.0"/>
              </operandLeft>
            </operandRight>
            <operandLeft
                xsi:type="metamodel:MoreOrEqual">
              <operandLeft
                  xsi:type="metamodel:Positive"
                  valeur="//@sensors.0/@value"/>
              <OperandRight
                  xsi:type="metamodel:Positive"
                  valeur="//@behaviours.0/@stateMachine/@constants.0"/>
            </operandLeft>
          </cond>
        </transitions>
        <transitions
            dstId="//@behaviours.0/@stateMachine/@states.3"
            nameIn="initToBackward">
          <cond
              xsi:type="metamodel:And">
            <operandRight
                xsi:type="metamodel:Less">
              <operandLeft
                  xsi:type="metamodel:Positive"
                  valeur="//@sensors.0/@value"/>
              <OperandRight
                  xsi:type="metamodel:Positive"
                  valeur="//@behaviours.0/@stateMachine/@constants.0"/>
            </operandRight>
            <operandLeft
                xsi:type="metamodel:Less">
              <operandLeft
                  xsi:type="metamodel:Positive"
                  valeur="//@sensors.1/@value"/>
              <OperandRight
                  xsi:type="metamodel:Positive"
                  valeur="//@behaviours.0/@stateMachine/@constants.0"/>
            </operandLeft>
          </cond>
        </transitions>
      </states>
      <states
          workingAction="//@actions.1"
          name="goLeft"
          uid="rootEscape"/>
      <states
          workingAction="//@actions.2"
          name="goRight"
          uid="rootEscape"/>
      <states
          name="backward"
          uid="rootEscape"/>
      <states
          workingAction="//@actions.0"
          name="goStraight"
          uid="rootEscape"/>
      <constants
          name="minDistance"/>
      <constants
          name="maxDistance"/>
      <constants
          name="beta"/>
    </stateMachine>
  </behaviours>
  <sensors xsi:type="metamodel:DistanceSensor"
      name="FrDsRight"
      sensorName="ds0">
    <value name="FrDsRightVal">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <sensors xsi:type="metamodel:DistanceSensor"
      name="FrDsLeft"
      sensorName="ps7">
    <value name="FrDsLeftVal">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <sensors xsi:type="metamodel:DistanceSensor"
      name="BhDsRight"
      sensorName="ps3">
    <value name="BhDsRight">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <sensors xsi:type="metamodel:DistanceSensor"
      name="BhDsLeft"
      sensorName="ps4">
    <value name="BhDsLeft">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <sensors xsi:type="metamodel:LightSensor"
      name="LsRight"
      sensorName="ls1">
    <value name="LsRightVal">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <sensors xsi:type="metamodel:LightSensor"
      name="LsLeft"
      sensorName="ls6">
    <value name="LsLeftVal">
      <value
          xsi:type="metamodel:FloatVal"/>
    </value>
  </sensors>
  <actuators
      xsi:type="metamodel:DifferentialWheel"
      name="wheelLeft"
      isLeft="true"/>
  <actuators
      xsi:type="metamodel:DifferentialWheel"
      name="wheelRight"/>
  <actuators
      xsi:type="metamodel:Group"
      name="group"
      wheels="//@actuators.0 //@actuators.1"/>
  <actions xsi:type="metamodel:Forward"
      group="//@actuators.2"
      speed="50"/>
  <actions xsi:type="metamodel:TurnLeft"
      group="//@actuators.2"
      speed="50"/>
  <actions xsi:type="metamodel:TurnRight"
      group="//@actuators.2"
      speed="50"/>
  <actions xsi:type="metamodel:Stopping"
      group="//@actuators.2"/>
  <actions xsi:type="metamodel:Backward"
      group="//@actuators.2"/>
</metamodel:Robot>
